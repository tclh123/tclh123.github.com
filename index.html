
<!DOCTYPE HTML>
<html lang="zh-cn">
<head>
  <meta charset="UTF-8">
  <title>Tclh123's 3rd Blog</title>

  <meta name="author" content="tclh123">
  
  <meta name="description" content="OS X Chflags Jan 5th, 2014 U盘插过机房的机子后被某Windows上的2b病毒影响了，所有文件都被隐藏然后生成对应的 .lnk 的文件（Windows快捷方式）。
今天插OS X上一看，在图形界面下还是被隐藏的（说明文件/FAT32在OS X上挂载后， &hellip;">
  
  

  <link rel="canonical" href="http://tclh123.github.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Tclh123's 3rd Blog" type="application/atom+xml">
</head>
  
<body class="default">
  <div id="wrapper">
    <div id="header">
  <h1><a href="/">Tclh123's 3rd Blog</a></h1>
  
    <p>I never quit, I never forgot my dreams.</p>
  
</div>
<ul id="social-links">
  
    <li><a class="feed" href="/atom.xml" title="RSS">RSS</a></li>
  
  
    <li><a class="twitter" href="http://twitter.com/tclh123" title="Twitter">Twitter</a></li>
  
  
    <li> <a class="github" href="https://github.com/tclh123" title="GitHub">GitHub</a> </li>
  
</ul>
<div class="clear"></div>
<ul id="nav">
  
    <li> <a href="/" class="current">blog</a> </li>
  

  
    <li><a href="/blog/archives">archives</a></li>
  
</ul>

    <div id="main"> 

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2014/01/05/os-x-chflags/">OS X Chflags</a>
    </h1>
  
  








  


<time datetime="2014-01-05T00:43:00+08:00" pubdate data-updated="true">Jan 5<span>th</span>, 2014</time>
</div>

<div class="post-content"><p>U盘插过机房的机子后被某Windows上的2b病毒影响了，所有文件都被隐藏然后生成对应的 .lnk 的文件（Windows快捷方式）。
今天插OS X上一看，在图形界面下还是被隐藏的（说明文件/FAT32在OS X上挂载后，文件的隐藏属性跟Windows上的都可以上层兼容?）</p>

<p>OS X 实际上是 FreeBSD，Linux上隐藏文件/文件夹都只有取名为<code>.</code>开头的方法，BSD上还有 <code>chflags</code> 这个命令</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>CHFLAGS(1)                BSD General Commands Manual               CHFLAGS(1)
</span><span class='line'>
</span><span class='line'>NAME
</span><span class='line'>     chflags -- change file flags
</span><span class='line'>
</span><span class='line'>SYNOPSIS
</span><span class='line'>     chflags [-fhv] [-R [-H | -L | -P]] flags file ...
</span><span class='line'>
</span><span class='line'>     ...
</span><span class='line'>
</span><span class='line'>     The flags are specified as an octal number or a comma separated list of keywords.  The following keywords are currently defined:
</span><span class='line'>
</span><span class='line'>           arch, archived
</span><span class='line'>                   set the archived flag (super-user only)
</span><span class='line'>
</span><span class='line'>           opaque  set the opaque flag (owner or super-user only).  [Directory is opaque when viewed through a union mount]
</span><span class='line'>
</span><span class='line'>           nodump  set the nodump flag (owner or super-user only)
</span><span class='line'>
</span><span class='line'>           sappnd, sappend
</span><span class='line'>                   set the system append-only flag (super-user only)
</span><span class='line'>
</span><span class='line'>           schg, schange, simmutable
</span><span class='line'>                   set the system immutable flag (super-user only)
</span><span class='line'>
</span><span class='line'>           uappnd, uappend
</span><span class='line'>                   set the user append-only flag (owner or super-user only)
</span><span class='line'>
</span><span class='line'>           uchg, uchange, uimmutable
</span><span class='line'>                   set the user immutable flag (owner or super-user only)
</span><span class='line'>
</span><span class='line'>           hidden  set the hidden flag [Hide item from GUI]</span></code></pre></td></tr></table></div></figure>


<p>flag 前面加 <code>no</code> 就是相反的意思,
所以,</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>chflags nohidden *</span></code></pre></td></tr></table></div></figure>


<p>就行了.</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2013/12/30/open-source-and-cross-platform-uml-tools/">Open Source &amp; Cross-platform UML Tools</a>
    </h1>
  
  








  


<time datetime="2013-12-30T12:47:00+08:00" pubdate data-updated="true">Dec 30<span>th</span>, 2013</time>
</div>

<div class="post-content"><p>呵呵，都到大四了还逃不过么。。依然有门神奇的课需要画一堆UML diagram。。
Well&#8230;至少我是不会去用那些 Windows Only 神奇的所谓企业级的软件的。。（真不知道学校都什么心态啊，你种你教学生的时候别用盗版啊</p>

<ul>
<li><p>http://www.genmymodel.com/</p>

<p>  在线的，略吊，但是目前支持的图有点少，不过大多时候能画类图也就够了</p></li>
<li><p>http://argouml.tigris.org/</p>

<p>  ArgoUML</p></li>
<li><p>http://www.umlet.com/changes.htm</p>

<p>  UMLet</p></li>
<li><p>http://www.astah.net/editions/community</p>

<p>  Astah Community，这个推荐的人还蛮多</p></li>
<li><p>https://github.com/amolenaar/gaphor</p>

<p>  用我大python写的</p></li>
<li><p>https://github.com/ObeoNetwork/UML-Modeling</p>

<p>  OpenSource (EPL licensed) UML2 Graphical Modelers (Class, Composite, State, Activity, Sequence &#8230;)
  这个应该是我找到的功能最全的，界面是继承 Eclipse 的貌似</p></li>
</ul>

</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2013/12/30/trouble-with-os-x-python-pkgs/">Trouble With OS X Python Pkgs</a>
    </h1>
  
  








  


<time datetime="2013-12-30T12:26:00+08:00" pubdate data-updated="true">Dec 30<span>th</span>, 2013</time>
</div>

<div class="post-content"><h2>起因</h2>

<p>安装 https://github.com/amolenaar/gaphor 的时候总报 <code>ImportError: No module named pygtk</code>,
而我的 pygtk 是 homebrew 装的，</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ brew info pygtk
</span><span class='line'>pygtk: stable 2.24.0
</span><span class='line'>http://www.pygtk.org/
</span><span class='line'>/usr/local/Cellar/pygtk/2.24.0 (658 files, 18M) *
</span><span class='line'>  Built from source
</span><span class='line'>From: https://github.com/Homebrew/homebrew/commits/master/Library/Formula/pygtk.rb
</span><span class='line'>==&gt; Dependencies
</span><span class='line'>Build: pkg-config ✔
</span><span class='line'>Required: glib ✔, gtk+ ✔, atk ✔, pygobject ✔, py2cairo ✔
</span><span class='line'>==&gt; Options
</span><span class='line'>--glade
</span><span class='line'>    Python bindigs for glade. (to `import gtk.glade`)
</span><span class='line'>--universal
</span><span class='line'>    Build a universal binary
</span><span class='line'>==&gt; Caveats
</span><span class='line'>For non-homebrew python (2.x), you need to amend your PYTHONPATH like so:
</span><span class='line'>  export PYTHONPATH=/usr/local/lib/python2.7/site-packages:$PYTHONPATH</span></code></pre></td></tr></table></div></figure>


<p>（出问题后看pygtk有几个依赖是叉，还重装过一次）</p>

<p><code>python -c "import pygtk"</code> 是 ok 的。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ echo $PYTHONPATH
</span><span class='line'>/usr/local/lib/python2.7/site-packages:
</span><span class='line'>
</span><span class='line'>$ python -c "import sys, pprint; pprint.pprint(sys.path)"
</span><span class='line'>['',
</span><span class='line'> '/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.8-intel.egg',
</span><span class='line'> '/Library/Python/2.7/site-packages/pip-1.1-py2.7.egg',
</span><span class='line'> '/Library/Python/2.7/site-packages/distribute-0.6.49-py2.7.egg',
</span><span class='line'> '/Users/tclh123/Programming/douban/PyDoubanFM/src/douban-client',
</span><span class='line'> '/usr/local/lib/python2.7/site-packages',
</span><span class='line'> '/Users/tclh123/Dev/UML_Tools/gaphor-gaphor-0.17.2',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC',
</span><span class='line'> '/Library/Python/2.7/site-packages',
</span><span class='line'> '/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg-info',
</span><span class='line'> '/usr/local/lib/python2.7/site-packages/gtk-2.0']
</span></code></pre></td></tr></table></div></figure>


<p><code>sys.path</code>中是包含 &#8216;/usr/local/lib/python2.7/site-packages&#8217; 的，homebrew 装的 pygtk 在这里面。</p>

<p>但是在 <code>cd gaphor-gaphor-0.17.2 &amp;&amp; pip install .</code> 的时候，输出 <code>sys.path</code></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>['/private/tmp/pip-RS454x-build/setuptools_git-1.0-py2.7.egg',
</span><span class='line'> '/private/tmp/pip-RS454x-build/nose-1.3.0-py2.7.egg',
</span><span class='line'> '.',
</span><span class='line'> '',
</span><span class='line'> '/Library/Python/2.7/site-packages/MySQL_python-1.2.3-py2.7-macosx-10.8-intel.egg',
</span><span class='line'> '/Library/Python/2.7/site-packages/pip-1.1-py2.7.egg',
</span><span class='line'> '/Library/Python/2.7/site-packages/distribute-0.6.49-py2.7.egg',
</span><span class='line'> '/Users/tclh123/Programming/douban/PyDoubanFM/src/douban-client',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
</span><span class='line'> '/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC',
</span><span class='line'> '/Library/Python/2.7/site-packages',
</span><span class='line'> '/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg-info']</span></code></pre></td></tr></table></div></figure>


<p>却不包含 &#8216;/usr/local/lib/python2.7/site-packages&#8217; 了。。为何</p>

<p>https://github.com/Homebrew/homebrew/issues/10908
这个 issue 是关于 Meld 的，依然没发现什么有帮助的信息么..</p>

<h2>python 在 OS X 下的 site-packages 目录</h2>

<p>在我机子上分散在下列地方，</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/  # 这个应该是系统自带python默认的地方?
</span><span class='line'>/Library/Python/2.7/site-packages/  # 大部分pip装的似乎都到这里了
</span><span class='line'>/usr/local/lib/python2.7/site-packages/  # homebrew 装的地方</span></code></pre></td></tr></table></div></figure>


<p>问题还没搞清楚
<strong>To be continued</strong></p>

<h2>easy_install on OS X</h2>

<p>还有，我搞不清楚现在我 easy_install 装的东西是否 work 了，以及装的地方在哪里？</p>

<p>http://lukehagan.com/journal/2010-11-21-easy_install/</p>

<p>似乎依然不 work 迷茫中</p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2013/12/17/use-haskell-on-os-x/">Use Haskell on OS X</a>
    </h1>
  
  








  


<time datetime="2013-12-17T14:54:00+08:00" pubdate data-updated="true">Dec 17<span>th</span>, 2013</time>
</div>

<div class="post-content"><p>现在不用一个个装 GHC、Cabal 什么的了，直接装 <a href="http://www.haskell.org/platform/mac.html">Haskell Platform</a>.</p>

<p>装完1.2G&#8230;略忧伤</p>

<p>下面抄一下介绍..</p>

<h2>Haskell Platform for Mac OS X</h2>

<p>Welcome to Haskell Platform. The platform consists of the Glasgow Haskell Compiler (GHC) and an extensive set of standard libraries and utilities with full documentation.</p>

<h3>Documentation</h3>

<ul>
<li>Libraries
  Documentation for the libraries that come with Haskell Platform &amp; GHC.</li>
<li>GHC
  The GHC User&#8217;s Guide has all you need to know about using GHC: command line options, language extensions, GHCi, etc.</li>
<li>GHC API
  Documentation for the GHC API.</li>
<li>Cabal
  An infrastructure for building and distributing Haskell software.</li>
<li>Haddock
  A tool for automatically generating documentation from annotated Haskell source code.</li>
</ul>


<h3>What is Installed</h3>

<p>On Mac OS X, the Haskell Platform is installed in two major pieces: GHC and Haskell Platform. They are installed respectively in:</p>

<pre><code>/Library/Frameworks/GHC.framework
/Library/Haskell
</code></pre>

<p>Executables are symlinked in /usr/bin and should be available in any shell.</p>

<h3>Uninstallation</h3>

<p>This and prior versions of GHC and Haskell Platform can be found and then easily removed with the uninstallation command line utility:</p>

<pre><code>/Library/Haskell/bin/uninstall-hs
</code></pre>

<p>Simply run it for more information.</p>

<h3>Configuring Cabal</h3>

<p>The cabal command manages the building and installation of packages, both your own, and those it can fetch from the Hackage repository.
The first time you run cabal, a Mac specific configuration is written into the ~/.cabal directory.</p>

<ul>
<li>If this is the first time you have ever run cabal, it will be made your active configuration.</li>
<li>If you have run cabal in the past, the new settings are in the file config.platform. You might want to review and incorporate some of the settings into your existing config file, or just replace your config file with it entirely.</li>
</ul>


<p>The configuration sets up cabal to install packages with the same layout as those installed with the Platform. Packages installed per user (&#8211;user, the default) are placed in a parallel tree in ~/Library/Haskell.</p>

<p>N.B. Built executables will be symlink&#8217;d into ~/Library/Haskell/bin, you probably want to add that to your $PATH by adding this line to your ~/.bash_profile:</p>

<pre><code>export PATH="$HOME/Library/Haskell/bin:$PATH"
</code></pre>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2013/12/16/upgrade-ack-on-ubuntu/">Upgrade Ack on Ubuntu</a>
    </h1>
  
  








  


<time datetime="2013-12-16T23:38:00+08:00" pubdate data-updated="true">Dec 16<span>th</span>, 2013</time>
</div>

<div class="post-content"><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir ~/dpkgs
</span><span class='line'>cd ~/dpkgs
</span><span class='line'>
</span><span class='line'>wget http://packages.debian.org/sid/all/libfile-next-perl/download
</span><span class='line'>wget http://packages.debian.org/sid/all/ack-grep/download
</span><span class='line'>sudo dpkg -i libfile-next-perl_1.12-1_all.deb
</span><span class='line'>sudo dpkg -i ack-grep_2.12-1_all.deb</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ul>
<li>http://stackoverflow.com/questions/7765813/ignoring-sub-directories-in-ackrc#answer-8012284</li>
<li>http://askubuntu.com/questions/355668/how-to-install-ack-grep-2-0-with-apt-get</li>
<li>http://askubuntu.com/questions/40779/how-to-install-a-deb-file-via-the-command-line</li>
</ul>

</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2013/12/15/vim-saving-of-files-as-sudo/">Vim Saving of Files as Sudo</a>
    </h1>
  
  








  


<time datetime="2013-12-15T22:40:00+08:00" pubdate data-updated="true">Dec 15<span>th</span>, 2013</time>
</div>

<div class="post-content"><h2>Understanding <code>:w !sudo tee %</code></h2>

<p><strong>Following is copied from Andrew Marshall&#8217;s answer on <a href="http://stackoverflow.com/questions/2600783/how-does-the-vim-write-with-sudo-trick-work/7078429#7078429">StackOverflow</a>.</strong></p>

<h3>% means &#8220;the current file&#8221;</h3>

<p>As eugene y pointed out, % does indeed mean &#8220;the current file name&#8221;. Another use for this in Vim is in substitution commands. For example, :%s/foo/bar means &#8220;in the current file, replace occurrences of foo with bar.&#8221; If you highlight some text before typing :s, you&#8217;ll see that the highlighted lines take the place of % as your substitution range.</p>

<h3>:w isn&#8217;t updating your file</h3>

<p>One confusing part of this trick is that you might think :w is modifying your file, but it isn&#8217;t. If you opened and modified file1.txt, then ran :w file2.txt, it would be a &#8220;save as&#8221;; file1.txt wouldn&#8217;t be modified, but the current buffer contents would be sent to file2.txt.</p>

<p>Instead of file2.txt, you can substitute a shell command to receive the buffer contents. For instance, :w !cat will just display the contents.</p>

<p>If Vim wasn&#8217;t run with sudo access, its :w can&#8217;t modify a protected file, but if it passes the buffer contents to the shell, a command in the shell can be run with sudo. In this case, we use tee.</p>

<h3>Understanding tee</h3>

<p>As for tee, picture the tee command as a T-shaped pipe in a normal bash piping situation: it directs output to specified file(s) and also sends it to standard output, which can be captured by the next piped command.</p>

<p>For example, in ps -ax | tee processes.txt | grep &#8216;foo&#8217;, the list of processes will be written to a text file and passed along to grep.</p>

<pre><code> +-----------+    tee     +------------+
 |           |  --------  |            |
 | ps -ax    |  --------  | grep 'foo' |
 |           |     ||     |            |
 +-----------+     ||     +------------+
                   ||   
           +---------------+
           |               |
           | processes.txt |
           |               |
           +---------------+
</code></pre>

<p>(Diagram created with Asciiflow.)</p>

<p>See the tee man page for more info.</p>

<h3>Tee as a hack</h3>

<p>In the situation your question describes, using tee is a hack because we&#8217;re ignoring half of what it does. sudo tee writes to our file and also sends the buffer contents to standard output, but we ignore standard output. We don&#8217;t need to pass anything to another piped command in this case; we&#8217;re just using tee as an alternate way of writing a file and so that we can call it with sudo.</p>

<h3>Making this trick easy</h3>

<p>You can add this to your .vimrc to make this trick easy-to-use: just type :w!!.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>" Allow saving of files as sudo when I forgot to start vim using sudo.
</span><span class='line'>cmap w!! w !sudo tee &gt; /dev/null %
</span><span class='line'>The &gt; /dev/null part explicitly throws away the standard output, since, as I said, we don't need to pass anything to another piped command.</span></code></pre></td></tr></table></div></figure>



</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2013/11/26/tmux-lose-colorscheme/">Tmux Lose Colorscheme</a>
    </h1>
  
  








  


<time datetime="2013-11-26T11:19:00+08:00" pubdate data-updated="true">Nov 26<span>th</span>, 2013</time>
</div>

<div class="post-content"><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>alias tmux="TERM=screen-256color-bce tmux"</span></code></pre></td></tr></table></div></figure>


<p>And set up the default-terminal option in <code>~/.tmux.conf</code>,</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>set -g default-terminal "screen-256color"
</span><span class='line'># set -g default-terminal "xterm"</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<ul>
<li>http://rhnh.net/2011/08/20/vim-and-tmux-on-osx</li>
<li>http://stackoverflow.com/questions/10158508/lose-vim-colorscheme-in-tmux-mode#comment24005530_10264470</li>
<li>http://blog.longwin.com.tw/2011/04/tmux-learn-screen-config-2011/</li>
</ul>

</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2013/11/23/python-string-intern/">Python String Intern</a>
    </h1>
  
  








  


<time datetime="2013-11-23T19:44:00+08:00" pubdate data-updated="true">Nov 23<span>rd</span>, 2013</time>
</div>

<div class="post-content"><p>今天在<code>__builtin__</code>里发现一个<code>intern</code>方法，（原来是internal的意思..
其实 C 里面有个文字常量区，就是说只要是字符串字面量都会存在那里。
才知道Python里不太一样，比如说</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&gt;&gt;&gt; a = 'a b'
</span><span class='line'>&gt;&gt;&gt; b = 'a b'
</span><span class='line'>&gt;&gt;&gt; a is b
</span><span class='line'>False</span></code></pre></td></tr></table></div></figure>


<p>真相是，python只对由<code>0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz</code>中的字符组成的字符串自动做intern。
因为它们可能会更短&#8230;更像标识符..
另外，在 Python 3 中，似乎被移到<code>sys.intern</code>中去了</p>

<h2>Reference</h2>

<ul>
<li>http://stackoverflow.com/questions/1136826/what-does-python-sys-intern-do-and-when-should-it-be-used/1137293</li>
</ul>

</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2013/11/23/always-trust-rvmrc-file/">Always Trust .rvmrc File</a>
    </h1>
  
  








  


<time datetime="2013-11-23T19:26:00+08:00" pubdate data-updated="true">Nov 23<span>rd</span>, 2013</time>
</div>

<div class="post-content"><p>使用Octopress的时候目录里默认存在一个<code>.rvmrc</code>文件，</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rvm use 1.9.3</span></code></pre></td></tr></table></div></figure>


<p>目测是指定ruby版本用的。每次进入目录都会有<code>Do you wish to trust this .rvmrc file?</code>的提示，需要手动确认。
还是挺烦的&#8230;</p>

<p>其实，<code>rvm list</code> 可以看到我机子上只有这一个版本</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>rvm rubies
</span><span class='line'>
</span><span class='line'>=&gt; ruby-1.9.3-p327 [ x86_64 ]</span></code></pre></td></tr></table></div></figure>


<p>所以这个 <code>.rvmrc</code> 是毫无意义的，可以删掉&#8230;
或者在<code>~/.rvmrc</code>里写入<code>export rvm_trust_rvmrcs_flag=1</code></p>
</div>
 </div>

  
  <div class="post"> <div class="post-header">
  
    <h1 class="post-title">
      <a href="/blog/2013/11/10/hylang/">Hylang</a>
    </h1>
  
  








  


<time datetime="2013-11-10T00:29:00+08:00" pubdate data-updated="true">Nov 10<span>th</span>, 2013</time>
</div>

<div class="post-content"><p>发现一个极好玩的项目，hylang，结合 List 跟 python 的写法&#8230;</p>

<blockquote><p>Lisp and Python should love each other. Let&#8217;s make it happen.</p></blockquote>

<p><a href="https://github.com/hylang/hy">https://github.com/hylang/hy</a></p>

<ul>
<li>Code: https://github.com/hylang/hy</li>
<li>Docs: http://hy.rtfd.org/</li>
<li>Quickstart: http://hy.rtfd.org/quickstart</li>
</ul>


<h3>社区</h3>

<p><a href="https://github.com/hylang">https://github.com/hylang</a></p>

<h3>以及由此发现的 python 实现语法词法分析相关的东东</h3>

<ul>
<li><a href="https://github.com/hylang/rply/">https://github.com/hylang/rply/</a></li>
<li><a href="https://github.com/alex/rply">https://github.com/alex/rply</a></li>
<li><a href="https://github.com/dabeaz/ply">https://github.com/dabeaz/ply</a></li>
</ul>

</div>
 </div>


<div id="pagination">
  
    <a class="prev" href="/blog/page/2/">&laquo;Previous</a>
  
  
</div>
 </div>
    <div id="footer">
  <p>
    如非特别声明，本 Blog 的文章由 tclh123 创作，采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/">知识共享署名-非商业性使用-相同方式共享 3.0 Unported 许可协议</a>进行许可。
  </p>
  <p>
    Powered by <a href="http://octopress.org">Octopress</a> and <a href="https://github.com/iwinux/compbits">Compbits</a>
  </p>
  
	<script type='text/javascript'>
	(function() {
	    var c = document.createElement('script'); 
	    c.type = 'text/javascript';
	    c.async = true;
	    c.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'www.clicki.cn/boot/48216';
	    var h = document.getElementsByTagName('script')[0];
	    h.parentNode.insertBefore(c, h);
	})();
	</script>  
</div>
  </div> <!-- #wrapper end -->

  

  

<script type="text/javascript">
      var disqus_shortname = 'tclh123github';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


  

  

  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


</body>
</html>
